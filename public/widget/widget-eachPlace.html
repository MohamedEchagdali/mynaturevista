<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google" content="translate">
  <meta http-equiv="content-language" content="es">
  <title>mynaturvista</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <link rel="icon" type="image/x-icon" href="./assets/icons/favicon.ico">
  <meta name="theme-color" content="#ff2b4f">
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!--========== Main style sheet ==========-->
  <link rel="stylesheet" href="/widget/src/styles/widget-eachPlace.css?v=159">
  <!--========== Remixicon ==========-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.css">
  <!-- Leaflet CSS y JS (ya los tienes) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Leaflet Routing Machine CSS y JS (Â¡esto es lo que falta!) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
<script>
function buildWidgetUrl(page, params = {}) {
    const url = new URL(page, window.location.origin);
    const urlParams = new URLSearchParams(window.location.search);
    const apiKey = urlParams.get('apikey');
    if (apiKey) {
        url.searchParams.set('apikey', apiKey);
    }
    Object.keys(params).forEach(key => {
        url.searchParams.set(key, params[key]);
    });
    return url.toString();
}
</script>
</head>
<body>
  <!-- Donde se inyectarÃ¡ el gadget de Google (se crea al pulsar el botÃ³n) -->
  <div id="google_translate_element"></div>
<header>
      <div class="logo">
        <a id="home-link">
  <svg class="w-6 h-6 text-gray-800 dark:text-white" 
       xmlns="http://www.w3.org/2000/svg" 
       width="24" height="24" fill="none" 
       viewBox="0 0 24 24" aria-hidden="true">
    <path stroke="currentColor" 
          stroke-linecap="round" 
          stroke-linejoin="round" 
          stroke-width="2" 
          d="M15 19l-7-7 7-7" />
  </svg>
</a>

        <div class="logo" translate="no">
          <span class="span1"><!--PLACE--><sup id="customName">{{CUSTOM_NAME}} &nbsp;</sup></span> 
        </div>
      </div>
      
      <button class= "mapBtn">
        <img src="https://res.cloudinary.com/drprd4k9o/image/upload/v1762631956/Home/assets/eachPlaceDom/map-icon_bysonnycandraa.png" alt="mapIcon">
      </button>
    </header>
    
  <!--========== Main section ==========-->
  <section class="main-section">
    
    <!--<a href="" class="logo">myNaturevista<sup>Client</sup></a>
    ========== Slider ==========-->
    <div class="slider">
      <!--========== Slide start ==========-->
      <div class="slide first-slide">
        <div translate="yes" class="slide-images">
          <img src="" alt="" class="slide-bg-img" ><!--wrapImg first img-->
          <h1 class="section-name">Photos</h1>
          <!--<img src="./assets/eachPlaceDom/camera-5068335_1280.png" alt="" class="slide-transparent-img" loading="lazy">-->
        </div>
        <div translate="yes" class="slide-text-content">
          <h3 class="slide-placeName"><!--h3--></h3>
          <p class="slide-paragraph"><!--intro--><span class="paragraph-anchor-tag"></span></p>
          <button class="watch-info-btn">See More</button>
        </div>
        <div class="slide-info-modal">
          <i class="ri-close-line info-close-btn"></i>
          <div class="info-modal-content">
            <div translate="yes" class="info-card">
              <h2 class="titleCard">Photos</h2>
              <p class="card-paragraph"><!--intro--></p>
              <div class="image-wrapper"></div>
              <!--<div class="link-search-container-2"></div>linkSearch-->
            </div>
          </div>
        </div>
      </div>
      <!--========== Slide end ==========-->
      <!--========== Slide start ==========-->
      <div  class="slide">
        <div  class="slide-images">
          <img src="https://res.cloudinary.com/drprd4k9o/image/upload/v1762631917/Home/assets/eachPlaceDom/bg-activities.jpg" alt="" class="slide-bg-img" loading="lazy">
          <h1 translate="yes" class="section-name">Things to Do</h1>
          <!--==========  <img src="./assets/eachPlaceDom/PngtreeCamping.png" alt="" class="slide-transparent-img" loading="lazy">   ==========-->
        </div>
        <div translate="yes" class="slide-text-content">
          <h3 class="slide-placeName"><!--h3--></h3>
          <p class="slide-paragraph"><!--activities--><span class="paragraph-anchor-tag"></span></p>
          <button translate="yes" class="watch-info-btn">See More</button>
        </div>
        <div class="slide-info-modal">
          <i class="ri-close-line info-close-btn"></i>
          <div class="info-modal-content">
            <div translate="yes" class="info-card">
              <h2 translate="yes" class="titleCard">Activities</h2>
              <p class="card-paragraph"><!--activities--></p>
            </div>
          </div>
        </div>
      </div>
      <!--========== Slide end ==========-->
      <!--========== Slide start ==========-->
      <div class="slide">
        <div class="slide-images">
          <img src="https://res.cloudinary.com/drprd4k9o/image/upload/v1762631904/Home/assets/eachPlaceDom/bg-1.jpg" alt="" class="slide-bg-img" loading="lazy">
          <h1 translate="yes" class="section-name">Travel Tips</h1>
          
        </div>
        <div translate="yes" class="slide-text-content">
          <h3 class="slide-placeName"><!--h3--></h3>
          <p class="slide-paragraph"><!--tips--><span class="paragraph-anchor-tag"></span></p>
          <button class="watch-info-btn">See More</button>
        </div>
        <div class="slide-info-modal">
          <i class="ri-close-line info-close-btn"></i>
          <div class="info-modal-content">
            <div translate="yes" class="info-card">
              <h2 translate="yes" class="titleCard">Travel Tips</h2>
              <p class="card-paragraph"><!--tips--></p>
            </div>
          </div>
        </div>
      </div>
      <!--========== Slide end ==========-->
      <!--========== Slide start ==========-->
      <div class="slide">
        <div class="slide-images">
          <img src="https://res.cloudinary.com/drprd4k9o/image/upload/v1763992800/Home/assets/eachPlaceDom/bg-geography.jpg" alt="" class="slide-bg-img" loading="lazy">
          <h1 translate="yes" class="section-name">Geography</h1>
          
        </div>
        <div translate="yes" class="slide-text-content">
          <h3 class="slide-placeName"><!--h3--></h3>
          <p class="slide-paragraph"><!--geography--><span class="paragraph-anchor-tag"></span></p>
          <button class="watch-info-btn">See More</button>
        </div>
        <div class="slide-info-modal">
          <i class="ri-close-line info-close-btn"></i>
          <div class="info-modal-content">
            <div translate="yes" class="info-card">
              <h2 translate="yes" class="titleCard">Geography</h2>
              <p class="card-paragraph"><!--geography--></p>
            </div>
          </div>
        </div>
      </div>
      <!--========== Slide end ==========-->
     
      <!--========== Slide start ==========-->
      <div class="slide">
        <div class="slide-images">
          <img src="https://res.cloudinary.com/drprd4k9o/image/upload/v1763985541/Home/assets/eachPlaceDom/bgConservation.jpg" alt="" class="slide-bg-img" loading="lazy">
          <h1 translate="yes" class="section-name">Conservation</h1>
        
        </div>
        <div  translate="yes"class="slide-text-content">
          <h3 class="slide-placeName"><!--h3--></h3>
          <p class="slide-paragraph"><!--conservation--><span class="paragraph-anchor-tag"></span></p>
          <button translate="yes" class="watch-info-btn">See More</button>
        </div>
        <div class="slide-info-modal">
          <i class="ri-close-line info-close-btn"></i>
          <div class="info-modal-content">
            <div translate="yes" class="info-card">
              <h2 translate="yes" class="titleCard">Conservation</h2>
              <p class="card-paragraph"><!--conservation--></p>
            </div>
          </div>
        </div>
      </div>
      <!--========== Slide end ==========-->
      <!--========== Slide start ==========-->
      <div class="slide">
        <div class="slide-images">
          <img src="https://res.cloudinary.com/drprd4k9o/image/upload/v1762631923/Home/assets/eachPlaceDom/bg-history%20%282%29.jpg" alt="" class="slide-bg-img" loading="lazy">
          <h1 translate="yes" class="section-name">History</h1>
          
        </div>
        <div translate="yes" class="slide-text-content">
          <h3 class="slide-placeName"><!--h3--></h3>
          <p class="slide-paragraph"><!--history--><span class="paragraph-anchor-tag"></span></p>
          <button translate="yes" class="watch-info-btn">See More</button>
        </div>
        <div class="slide-info-modal">
          <i class="ri-close-line info-close-btn"></i>
          <div class="info-modal-content">
            <div translate="yes" class="info-card">
              <h2 translate="yes" class="titleCard">History</h2>
              <p class="card-paragraph"><!--history--></p>
            </div>
          </div>
        </div>
      </div>
      <!--========== Slide end ==========-->
      <!--========== Slide start ==========-->
      <div class="slide">
        <div class="slide-images">
          <img src="https://res.cloudinary.com/drprd4k9o/image/upload/v1762631894/Home/assets/eachPlaceDom/b9g-5.jpg" alt="" class="slide-bg-img" loading="lazy">
          <h1 translate="yes" class="section-name">Map</h1>
          
        </div>
        <div translate="yes" class="slide-text-content">
          <h3 class="slide-placeName"><!--h3--></h3>
          <p class="slide-paragraph"><!--conclusion--><span class="paragraph-anchor-tag"></span></p>
          <button translate="yes" class="watch-info-btn">See More</button>
        </div>
        <div class="slide-info-modal">
          <i class="ri-close-line info-close-btn"></i>
          <div class="info-modal-content">
            <div translate="yes" class="info-card">
              <h2 translate="yes" class="titleCard">Maps</h2>
              <div id="map"></div>
              <div class="link-search-container"></div><!--linkSearch-->
              <p class="card-paragraph"><!--conclusion--></p>
              
            </div>
          </div>
        </div>
      </div>
      <!--========== Slide end ==========-->

      
    </div>
    </div>

    <!--========== Social media links ==========
    <div class="slider-media-icons">
      <a href="#" class="media-links"><i class="ri-facebook-fill"></i></a>
      <a href="#" class="media-links"><i class="ri-instagram-line"></i></a>
      <a href="#" class="media-links"><i class="ri-twitter-x-line"></i></a>
    </div>-->
    <a onclick="scrollTo(); location.href='#continents'" class="earth-button" title="Explore Continents" id="home-linkEarth">
  <img src="https://res.cloudinary.com/drprd4k9o/image/upload/q_auto,f_auto/Home/assets/icons/planet-earth_3594282" alt="Planet Earth" class="earth-icon" />
</a>
    <!--<a id="home-linkEarth" class="video-container">
      <video autoplay loop muted playsinline >
          <source src="./assets/videos/planetEarth.webm" preload="auto">
          <source src="./assets/videos/planetEarth.mp4" preload="auto" >fondo negro revisar !!!!!!!!!!!
          not support. 
      </video>-->
    </a>
    <!--========== Slider left/right arrow navigation ==========-->
    <div class="slider-navigation">
      <div class="prev-btn"><i class="ri-arrow-left-s-line"></i> Prev</div>
      <div class="next-btn">Next <i class="ri-arrow-right-s-line"></i></div>
    </div>

    <!--========== Slider pagination buttons for each slide ==========-->
    <div class="slide-pagination">
      <div class="slide-btn first-slide-btn"></div>
      <div class="slide-btn"></div>
      <div class="slide-btn"></div>
      <div class="slide-btn"></div>
      <div class="slide-btn"></div>
      <div class="slide-btn"></div>
      <div class="slide-btn"></div>
    </div>
    
    <!--========== Slide visibility indicator bars for each slide ==========-->
    <div class="slide-indicator-bars">
      <div class="indicator-bar first-indicator-bar"></div>
      <div class="indicator-bar"></div>
      <div class="indicator-bar"></div>
      <div class="indicator-bar"></div>
      <div class="indicator-bar"></div>
      <div class="indicator-bar"></div>
      <div class="indicator-bar"></div>
    </div>
  </section>

  <!--========== Main javascript ==========-->
  <!-- DOMPurify for XSS protection -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
  <!-- Sanitizer functions -->
  <script src="/js/sanitizer.js"></script>
  <script src="/widget/src/eachPlace.js"></script>
  <script type="module" src="/widget/src/eachPlace-loadData.js"></script>
  <script src="/widget/src/fakeLoadBar.js"></script>
  <script src="/widget/src/clientPreferences.js"></script>
<!-- ANTES DE </body> en widget.html -->
<script>
(function () {
  let googleScriptLoaded = false;
  let googleInitialized = false;
  const pageLang = 'en';

  // Crea el contenedor del traductor (inicialmente oculto)
  const GT_DIV = document.createElement('div');
  GT_DIV.id = 'google_translate_element';
  GT_DIV.style.position = 'fixed';
  GT_DIV.style.top = '12px';
  GT_DIV.style.right = '20px';
  GT_DIV.style.zIndex = '99999';
  GT_DIV.style.display = 'none';
  document.body.appendChild(GT_DIV);

  // Inserta estilos globales para ocultar el header de Google Translate
  const style = document.createElement('style');
  style.textContent = `
    /* Ocultar banner superior de Google Translate */
    .goog-te-banner-frame.skiptranslate,
    #goog-gt-tt,
    .goog-te-balloon-frame,
    .goog-logo-link,
    .goog-te-banner-frame,
    .goog-te-gadget-icon,
    .goog-te-gadget-simple {
      display:none !important;
      visibility:hidden !important;
      height:0!important;
      width:0!important;
      overflow:hidden!important;
    }
    
    /* Ocultar el iframe contenedor que aparece en la parte superior */
    .VIpgJd-ZVi9od-ORHb-OEVmcd,
    iframe.VIpgJd-ZVi9od-ORHb-OEVmcd,
    iframe.skiptranslate,
    iframe#\\:1\\.container {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      height: 0 !important;
      width: 0 !important;
      position: absolute !important;
      top: -9999px !important;
      left: -9999px !important;
      z-index: -999999 !important;
      pointer-events: none !important;
    }
    
    body { 
      top: 0 !important; 
      position: static !important; 
    }
    
    .goog-te-gadget {
      font-family: Inter, sans-serif !important;
      font-size: 13px !important;
      background: #fff;
      border-radius: 10px;
      padding: 6px 8px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      border: 1px solid rgba(0,0,0,0.06);
    }
    
    .goog-te-combo {
      border:none!important;
      background:transparent!important;
      cursor:pointer;
      outline:none!important;
    }
  `;
  document.head.appendChild(style);

  // Inicializador que Google llamarÃ¡
  window.googleTranslateElementInit = function() {
    new google.translate.TranslateElement({
      pageLanguage: pageLang,
      includedLanguages: 'en,es,fr,de,it,ar,pt,ru,zh-CN,ja,ko,hi',
      layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL,
      autoDisplay: false
    }, 'google_translate_element');

    googleInitialized = true;
    GT_DIV.style.display = 'block';
    console.log('âœ… Google Translate cargado');

    // Aplicar idioma guardado si existe
    const saved = localStorage.getItem('preferredLanguage');
    if (saved && saved !== pageLang) {
      setTimeout(() => applyTranslation(saved), 500);
    }
  };

  // Cargar script de Google
  function loadGoogleTranslate() {
    if (googleScriptLoaded) return;
    const s = document.createElement('script');
    s.src = '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
    s.async = true;
    document.head.appendChild(s);
    googleScriptLoaded = true;
    console.log('ðŸŒ Script de Google Translate insertado');
  }

  // Aplicar idioma automÃ¡ticamente
  function applyTranslation(langCode) {
    const tryApply = () => {
      const combo = document.querySelector('.goog-te-combo');
      if (combo) {
        combo.value = langCode;
        combo.dispatchEvent(new Event('change'));
        localStorage.setItem('preferredLanguage', langCode);
        console.log('âœ… TraducciÃ³n aplicada a', langCode);
        return true;
      }
      return false;
    };
    let tries = 0;
    const interval = setInterval(() => {
      if (tryApply() || tries++ > 10) clearInterval(interval);
    }, 400);
  }

  // Escuchar mensajes del widget padre
  window.addEventListener('message', (e) => {
    if (!e.data || e.data.type !== 'toggle-translate') return;

    console.log('ðŸŒ toggle-translate recibido en iframe');

    if (!googleInitialized) {
      loadGoogleTranslate();
    } else {
      // Alternar visibilidad del selector
      GT_DIV.style.display = GT_DIV.style.display === 'none' ? 'block' : 'none';
    }
  });

  // Seguridad: eliminar banners y iframes si aparecen
  const observer = new MutationObserver(() => {
    // Eliminar banners
    document.querySelectorAll('.goog-te-banner-frame,#goog-gt-tt').forEach(el => el.remove());
    
    // Eliminar iframes molestos
    document.querySelectorAll('iframe.VIpgJd-ZVi9od-ORHb-OEVmcd, iframe.skiptranslate').forEach(iframe => {
      if (iframe.className.includes('VIpgJd-ZVi9od-ORHb-OEVmcd')) {
        iframe.style.display = 'none';
        iframe.style.visibility = 'hidden';
        iframe.style.opacity = '0';
        iframe.style.height = '0';
        iframe.style.width = '0';
        iframe.style.position = 'absolute';
        iframe.style.top = '-9999px';
        iframe.style.zIndex = '-999999';
      }
    });
    
    document.body.style.top = '0';
    document.body.style.position = 'static';
  });
  observer.observe(document.documentElement, { childList: true, subtree: true });
})();
</script>
</body>
</html>